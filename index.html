<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      /* These are styles for demo page */
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        font-family: sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      .container {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
      }

      #custom_canvas {
        width: 100%;
        height: 100%;
      }

      .button {
        /* reset button styles */
        all: initial;
        font-family: sans-serif;
        position: absolute;
        padding: 10px 26px;
        font-size: 18px;
        border-radius: 6px;
        color: #fff;
        background-color: #ff4cc7;
      }

      .button:hover {
        cursor: pointer;
        background-color: #ed38b4;
      }

      .button:active {
        background-color: #d21e99;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <button class="button" id="button">Click me!</button>
      <canvas id="custom_canvas"></canvas>
    </div>

    <script src="./confetti.js"></script>
    <script>
      const canvas = document.getElementById("custom_canvas");
      const button = document.getElementById("button");
      const jsConfetti = new JSConfetti({ canvas });
      /**
       * JSConfetti addConfetti props
       * confettiColors : ìƒ‰ì¢…ì´ ìƒ‰ìƒ ì„¤ì •.
       * confettiRadius : ìƒ‰ì¢…ì´ ì¡°ê° ë°˜ì§€ë¦„ ê¸¸ì´ ì„¤ì •.
       * confettiNumber : ìƒ‰ì¢…ì´ ì¡°ê° ê°œìˆ˜ ì„¤ì •.
       * emojis : ì´ëª¨í‹°ì½˜ìœ¼ë¡œ ìƒ‰ì¢…ì´ ì¡°ê° ì‚¬ìš©.
       * emojiSize : ì´ëª¨í‹°ì½˜ ì‚¬ì´ì¦ˆ ì„¤ì •.
       * */
      const emojies = [
        {
          confettiRadius: 12,
          confettiNumber: 100,
        },
        {
          emojis: ["ðŸŒˆ", "âš¡ï¸", "ðŸ’¥", "âœ¨", "ðŸ’«", "ðŸŒ¸"],
        },
        {
          emojis: ["âš¡ï¸", "ðŸ’¥", "âœ¨", "ðŸ’«"],
          confettiesNumber: 10,
        },
        {
          emojis: ["ðŸ”", "ðŸ•", "ðŸº"],
          emojiSize: 100,
          confettiNumber: 30,
        },
        {
          emojis: ["ðŸ¦„"],
          confettiRadius: 100,
          confettiNumber: 30,
        },
        {
          confettiColors: [
            "#ffbe0b",
            "#fb5607",
            "#ff006e",
            "#8338ec",
            "#3a86ff",
          ],
          confettiRadius: 10,
          confettiNumber: 150,
        },
        {
          confettiColors: [
            "#9b5de5",
            "#f15bb5",
            "#fee440",
            "#00bbf9",
            "#00f5d4",
          ],
          confettiRadius: 6,
          confettiNumber: 300,
        },
      ];
      function debouncePress(func, wait = 250) {
        let lastArgs, result; // ë§ˆì§€ë§‰ í˜¸ì¶œì˜ ì¸ìž, ê²°ê³¼ê°’ ì €ìž¥
        let lastCallTime; // ë§ˆì§€ë§‰ í˜¸ì¶œ ì‹œê°„ì„ ê¸°ë¡
        let timerId; // íƒ€ì´ë¨¸ ID ì €ìž¥
        // ì „ë‹¬ëœ func ê°€ í•¨ìˆ˜ê°€ ì•„ë‹ˆë©´ TypeError ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
        if (typeof func !== "function") {
          throw new TypeError("Expected a function");
        }
        // ì£¼ì–´ì§„ ì‹œê°„ì´ ì§€ë‚˜ë©´ í˜¸ì¶œì„ í—ˆìš©í• ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” í•¨ìˆ˜
        const shouldInvoke = (time) => {
          const timeSinceLastCall = time - (lastCallTime || 0); // ë§ˆì§€ë§‰ í˜¸ì¶œ í›„ ê²½ê³¼ ì‹œê°„ ê³„ì‚°
          // ì²˜ìŒ í˜¸ì¶œí•˜ê±°ë‚˜, ì§€ì •ëœ ì‹œê°„(wait)ì´ ì§€ë‚¬ê±°ë‚˜, ì‹œê°„ì´ ìŒìˆ˜ê°€ ë˜ë©´ true ë°˜í™˜
          return (
            lastCallTime === undefined ||
            timeSinceLastCall >= wait ||
            timeSinceLastCall < 0
          );
        };
        // íƒ€ì´ë¨¸ê°€ ë§Œë£Œë˜ì—ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
        const timerExpired = () => {
          const time = Date.now(); // í˜„ìž¬ ì‹œê°„
          // ì§€ì •ëœ ì‹œê°„ì´ ì§€ë‚¬ìœ¼ë©´ í•¨ìˆ˜ë¥¼ ì‹¤ì œë¡œ í˜¸ì¶œ
          if (shouldInvoke(time)) {
            timerId = undefined; // íƒ€ì´ë¨¸ë¥¼ í•´ì œ
            if (lastArgs) {
              const args = lastArgs; // ë§ˆì§€ë§‰ ì¸ìžë¥¼ ì €ìž¥
              lastArgs = undefined; // ì¸ìžë¥¼ ì´ˆê¸°í™”
              result = func.apply(undefined, args); // ì „ë‹¬ëœ í•¨ìˆ˜(func)ë¥¼ í˜¸ì¶œí•˜ê³  ê·¸ ê²°ê³¼ë¥¼ result ì— ì €ìž¥
              return result;
            }
            lastArgs = undefined; // ì¸ìžë¥¼ ì´ˆê¸°í™”
            return result;
          }
          // ì•„ì§ ì‹œê°„ì´ ë‚¨ì•˜ìœ¼ë©´ ë‹¤ì‹œ íƒ€ì´ë¨¸ë¥¼ ì„¤ì •í•´ ë‚¨ì€ ì‹œê°„ ë™ì•ˆ ëŒ€ê¸°
          timerId = setTimeout(
            timerExpired,
            wait - (time - (lastCallTime || 0))
          );
        };
        wait = +wait || 0; // ëŒ€ê¸° ì‹œê°„ì„ ìˆ«ìžë¡œ ë³€í™˜í•˜ê±°ë‚˜ ê¸°ë³¸ê°’ì„ 0ìœ¼ë¡œ ì„¤ì •
        // ìµœì¢…ì ìœ¼ë¡œ ë°˜í™˜í•  í™”ì‚´í‘œ í•¨ìˆ˜ (ë””ë°”ìš´ìŠ¤ëœ í•¨ìˆ˜)
        return (...args) => {
          const time = Date.now(); // í˜„ìž¬ ì‹œê°„
          const isInvoking = shouldInvoke(time); // ì´ë²ˆ í˜¸ì¶œì´ ì‹¤í–‰ ê°€ëŠ¥í•œì§€ í™•ì¸
          lastArgs = args; // í˜¸ì¶œëœ ì¸ìžë¥¼ ì €ìž¥
          lastCallTime = time; // ë§ˆì§€ë§‰ í˜¸ì¶œ ì‹œê°„ ê¸°ë¡
          // í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤ë©´ íƒ€ì´ë¨¸ë¥¼ ì„¤ì •í•˜ê³  í•¨ìˆ˜ë¥¼ ëŒ€ê¸°ì‹œí‚µë‹ˆë‹¤.
          if (isInvoking && timerId === undefined) {
            timerId = setTimeout(timerExpired, wait); // ì§€ì •ëœ ì‹œê°„ì´ ì§€ë‚˜ë©´ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë„ë¡ íƒ€ì´ë¨¸ ì„¤ì •
            return result; // ì•„ì§ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ì´ì „ ê²°ê³¼ ë°˜í™˜
          }
          // íƒ€ì´ë¨¸ê°€ ì—†ë‹¤ë©´ ìƒˆë¡œ ì„¤ì • (ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¼ ë•ŒëŠ” íƒ€ì´ë¨¸ê°€ ì„¤ì •ë˜ì§€ ì•ŠìŒ)
          if (timerId === undefined) {
            timerId = setTimeout(timerExpired, wait);
          }
          return result; // ì´ì „ì— ì‹¤í–‰ëœ ê²°ê³¼ë¥¼ ë°˜í™˜
        };
      }
      const onPressButton = debouncePress(() => {
        jsConfetti.addConfetti(
          emojies[Math.floor(Math.random() * emojies.length)]
        );
      });
      button.addEventListener("click", onPressButton);
      setTimeout(
        () =>
          jsConfetti.addConfetti(
            emojies[Math.floor(Math.random() * emojies.length)]
          ),
        1e3
      );
    </script>
  </body>
</html>
